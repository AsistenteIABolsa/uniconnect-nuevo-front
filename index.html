<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Uniconnect - Tu Portal de Empleo</title>
    <meta name="description" content="Conecta estudiantes universitarios con las mejores oportunidades laborales" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div id="root"></div>
    <!-- Google Fonts (opcional) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Estilos globales -->
    <style>
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }
      ::-webkit-scrollbar-thumb {
        background: #14b8a6;
        border-radius: 5px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #0f766e;
      }

      /* Loading animation */
      .loading-spinner {
        display: inline-block;
        width: 40px;
        height: 40px;
        border: 4px solid rgba(20, 184, 166, 0.3);
        border-radius: 50%;
        border-top-color: #14b8a6;
        animation: spin 1s ease-in-out infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Smooth scroll */
      html {
        scroll-behavior: smooth;
      }

      /* Font family + fondo */
      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(to bottom right, #ffffff, #f8fafc);
      }

      /* Flecha indicadora */
      #widget-arrow {
        position: fixed;
        right: 20px;
        width: 40px;
        height: 40px;
        background: url("https://cdn-icons-png.flaticon.com/512/545/545682.png")
          no-repeat center center;
        background-size: contain;
        opacity: 0;
        transition: opacity 0.5s;
        z-index: 9999;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

   
     <!-- Vapi Widget - Desktop (top-right) -->
    <vapi-widget
      
      public-key="d1b861f9-2722-4b68-baef-daa861e318cb"
      assistant-id="d51d1b88-ede9-4363-a6af-4fa165bd0e3b"
      mode="hybrid"
      theme="light"
      base-bg-color="#ffffff"
      accent-color="#14B8A6"
      cta-button-color="#ffffff"
      cta-button-text-color="#000000"
      border-radius="large"
      size="compact"
      position="bottom-right"
      title="AGENDA TU CITA"
      start-button-text="Iniciar Chat"
      end-button-text="Finalizar Chat"
      chat-first-message="¡Hola! Aquí podrás agendar tus citas en Cemdi para Famisanar. ¿En qué puedo ayudarte?"
      chat-placeholder="Escribe tu consulta para agendar cita..."
      voice-show-transcript="true"
      consent-required="true"
      consent-title="Términos y Condiciones"
      consent-content="Al hacer clic en &quot;Aceptar&quot;, y cada vez que interactúo con este agente de IA, consiento la grabación, almacenamiento y compartición de mis comunicaciones con proveedores de servicios de terceros, y como se describe en nuestros Términos de Servicio."
      consent-storage-key="vapi_widget_consent"
    >    </vapi-widget>

    <!-- Flechita que apunta al widget -->
    <div id="widget-arrow"></div>

    <!-- Script del widgettt -->
    <script
      src="https://unpkg.com/@vapi-ai/client-sdk-react/dist/embed/widget.umd.js"
      type="text/javascript"
    ></script>

    <!-- Inicialización dinámica (posición y flecha) -->
    <script type="text/javascript">
      function updateWidgetPosition() {
        const widget = document.querySelector("vapi-widget");
        if (widget) {
          if (window.innerWidth <= 768) {
            widget.setAttribute("position", "bottom-right");
            showWidgetArrow("bottom");
          } else {
            widget.setAttribute("position", "top-right");
            showWidgetArrow("top");
          }
        }
      }

      window.addEventListener("load", function () {
        if (window.VapiWidget) {
          updateWidgetPosition();
        }
      });

      setTimeout(function () {
        if (window.VapiWidget) {
          updateWidgetPosition();
        }
      }, 1000);

      window.addEventListener("resize", updateWidgetPosition);
      updateWidgetPosition();

      function showWidgetArrow(position) {
        const arrow = document.getElementById("widget-arrow");
        if (arrow) {
          if (position === "bottom") {
            arrow.style.top = "auto";
            arrow.style.bottom = "120px";
          } else {
            arrow.style.bottom = "auto";
            arrow.style.top = "120px";
          }
          setTimeout(() => (arrow.style.opacity = "1"), 2000);
        }
      }

      function hideWidgetArrow() {
        const arrow = document.getElementById("widget-arrow");
        if (arrow) {
          arrow.style.opacity = "0";
          setTimeout(() => (arrow.style.display = "none"), 500);
        }
      }

      document.addEventListener("click", function (e) {
        if (
          !e.target.closest("vapi-widget") &&
          !e.target.closest(".widget-arrow")
        ) {
          const arrow = document.getElementById("widget-arrow");
          if (arrow && arrow.style.opacity === "1") {
            hideWidgetArrow();
          }
        }
      });

      let scrollTimeout;
      window.addEventListener("scroll", function () {
        const arrow = document.getElementById("widget-arrow");
        if (arrow && arrow.style.opacity === "1") {
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(hideWidgetArrow, 1500);
        }
      });
    </script>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
